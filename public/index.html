<!DOCTYPE html>
<html>
<head>
	<title>Cytoscape.js prototype</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <script type='text/javascript' src='js/cytoscape.min.js'></script>
    <script type='text/javascript' src='js/cytoscape-cose-bilkent.js'></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body style="position: absolute;">
	<div id="cyContainer" style="height: 90vh; width: 100vh; border: 1px solid black;">
		<div id="cy" style="width: 100%;"></div>
	</div>
	<script type='text/javascript'>
	(function(window, undefined) {
		var data =  {
			nodes: [
			  { data: { id: 'cat' } },
			  { data: { id: 'bird' } },
			  { data: { id: 'ladybug' } },
			  { data: { id: 'aphid' } },
			  { data: { id: 'rose' } },
			  { data: { id: 'grasshopper' } },
			  { data: { id: 'plant' } },
			  { data: { id: 'wheat' } }
			],
			edges: [
			  { data: { source: 'cat', target: 'bird' } },
			  { data: { source: 'bird', target: 'ladybug' } },
			  { data: { source: 'bird', target: 'grasshopper' } },
			  { data: { source: 'grasshopper', target: 'plant' } },
			  { data: { source: 'grasshopper', target: 'wheat' } },
			  { data: { source: 'ladybug', target: 'aphid' } },
			  { data: { source: 'aphid', target: 'rose' } }
			]
		  };

		var cy = window.cy = cytoscape({
			container: document.getElementById('cy'),
			minZoom: .5,
			maxZoom: 2.5,
			style: [{
				selector: 'node',
				style: {
					'background-color': 'red',
					'shape': 'roundrectangle',
					'width': 'label',
					'padding': '10px',
					'padding-relative-to': 'max',
					'text-valign': 'center',
					'text-halign': 'center',
					'text-background-color': 'white',
					'text-background-opacity': 0.5,
					'text-background-shape': 'roundrectangle',
					'text-background-padding': '2px',
					'label': 'data(id)'
				}
			},
			{
				selector: 'node[image]',
				style: {
					'background-image': 'data(image)',
					'background-color': 'rgba(255, 255, 255, 0)',
					'background-height': 'auto',
					'background-width': 'auto',
					'background-clip': 'none',
					'background-fit': 'contain',
					'background-repeat': 'no-repeat',
					'background-image-opacity': 1.0,
					'text-background-color': 'white',
					'text-background-opacity': 0.2
				}
			},
			{
				selector: ':selected',
				style: {
					'border-color' : 'blue',
					'border-width' : '5px'
				}
			},
			{
				selector: 'edge',
				style: {
					'width': 1,
					'curve-style': 'bezier',
					'line-color': '#000000',
					'target-arrow-color': 'black',
					'target-arrow-shape': 'triangle'
				}
			},
			{
				selector: 'node.highlighted',
				style: {
					'border-color': 'yellow',
					'border-width': 5
				}
			},
			{
				selector: 'edge.highlighted',
				style: {
					'line-color': 'orange',
					'width': 4
				}
			}
			],

			elements: data,
			layout: {
				name: 'random',
				animate: true,
				directed: true,
				padding: 10
			}			
		});
		cy.resize();

	}(window));
	</script>
	<script type='text/javascript' src='js/demoutil.js'></script>
	<script type='text/not-real'>
		(function(window, cy, undefined) {
		var demo = new DemoUtil(cy);			

		demo.cy.options();

		demo.highlightPath('dijkstra', '#cat', '#rose', 10000);

		demo.animateLayout(demo.Layouts.GRID);

		demo.animateLayout(demo.Layouts.CIRCLE);

		demo.highlightPath('dijkstra', '#cat', '#wheat', 10000);

		demo.highlightPath('dijkstra', '#cat', '#bird', 10000);

		demo.highlightPath('dijkstra', '#cat', '#plant', 10000);

		demo.addNode('Cow', { image: 'https://openclipart.org/image/300px/svg_to_png/10205/rygle-Colour-Cows-4.png' });

		demo.cy.on('select', function() {
			var selected = demo.cy.$(':selected');
			if(selected.size() == 2) {
				demo.highlightPath(DemoUtil.Algorithms.DIJKSTRA, selected[0], selected[1], 5000);
			}
		});

		demo.fit();

		demo.cy.nodes().animate({
			style: { 'background-color': 'red' }
			}, {
			duration: 5000,
			complete: function(){
				console.log('Animation complete');
			}
		});

	}(window, window.cy));	
	</script>
</body>
</html>
